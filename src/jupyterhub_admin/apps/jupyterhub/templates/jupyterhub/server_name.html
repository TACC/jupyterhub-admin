<div class="modal" role="dialog" id="serverNameModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">User Server</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <input type="hidden" name="username" id="username" value=""/>
        <div class="form-server">
          <label>Please enter a name for the server to delete</label>
          <input
            id="serverName"
            class="form-control"
            type="text"
          />
        </div>
      </div>
      <div class="modal-footer">
        <div id="stopServerError">
          Error trying to stop server
        </div>
        <button type="button" class="btn btn-primary" id="confirmServerName" disabled=true>Enter</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
<script>
  function stopSuccess(data, textStatus, jqXHR) {
    window.location.assign(data.url);
  }

  function stopFailure(jqXHR, textStatus, errorThrown) {
    // Upon failing to save or delete an item, show the error
    $("#stopServerError").show();
  }

  function stopServerApi() {
    $.ajax(
      "{{ serverNameApi  }}",
      {
        method: "DELETE",
        headers: {'X-CSRFToken': '{{ csrf_token }}', 'Content-Type':'application/json'},
        data: JSON.stringify({
          'server': $("#serverName"),
          'username': $("#username")
        }),
        success: stopSuccess,
        error: stopFailure
      }
    )
  }

  $(document).ready(function() {
    username = $(this).data('username');
    $('#username').val(username);
  });
</script>